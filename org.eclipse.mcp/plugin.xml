<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

	<extension-point id="org.eclipse.mcp.modelContextProtocolServer"
		name="Model Context Protocol Server"
		schema="schema/modelContextProtocolServer.exsd" />

	<extension point="org.eclipse.ui.keywords">
		<keyword label="MCP"
			id="org.eclipse.mcp.keyword.mcp" />
		<keyword label="MODEL"
			id="org.eclipse.mcp.keyword.model" />
		<keyword label="CONTEXT"
			id="org.eclipse.mcp.keyword.context" />
		<keyword label="PROTOCOL"
			id="org.eclipse.mcp.keyword.protocol" />
	</extension>

	<extension point="org.eclipse.ui.activities">
		<category id="org.eclipse.mcp.activity"
			description="Connect Agentic clients to Model Context Protocol servers running within the workbench"
			name="MCP Services" />
	</extension>
	
	<extension
          point="org.eclipse.mcp.modelContextProtocolServer"
          id="org.eclipse.mcp.platform"
          name="Eclipse Platform Services">
       <contributor
             id="org.eclipse.mcp.platform.contributor"
             name="Eclipse Platform Services"
             description="Eclipse Platform Services for Files, Editors, Consoles and Markers"
             provider="Eclipse"
             activityId="org.eclipse.mcp.platform">
          <factory class="org.eclipse.mcp.platform.FactoryProvider"/>
       </contributor>
    </extension>
    
     <extension point="org.eclipse.ui.activities">
   
       <activity id="org.eclipse.mcp.platform" 
           description="Services for Editors, Files, Consoles, Problems and Tasks"
           name="Eclipse Platform Services" />
   
       <categoryActivityBinding activityId="org.eclipse.mcp.platform"
           categoryId="org.eclipse.mcp.activity" />
    
       <defaultEnablement id="org.eclipse.mcp.platform" />
     </extension>

	<extension point="org.eclipse.ui.preferencePages">
		<page
			id="org.eclipse.mcp.preferences.general"
			name="MCP Services"
			class="org.eclipse.mcp.internal.preferences.McpGeneralPreferencePage">
			<keywordReference id="org.eclipse.mcp.keyword.mcp" />
			<keywordReference id="org.eclipse.mcp.keyword.model" />
			<keywordReference id="org.eclipse.mcp.keyword.context" />
			<keywordReference id="org.eclipse.mcp.keyword.protocol" />
		</page>
	</extension>

	<extension point="org.eclipse.core.runtime.preferences">
		<initializer
			class="org.eclipse.mcp.internal.preferences.PreferenceInitializer" />
	</extension>

	<extension point="org.eclipse.ui.propertyPages">
		<page name="General"
			class="org.eclipse.mcp.internal.preferences.ToolPropertyPage"
			id="org.eclipse.mcp.internal.preferences.ToolPropertyPage">
			<enabledWhen>
				<instanceof
					value="org.eclipse.mcp.IMCPElementPropertyInput">
				</instanceof>
			</enabledWhen>
		</page>
	</extension>

	<extension point="org.eclipse.ui.startup">
		<startup class="org.eclipse.mcp.internal.Startup" />
	</extension>

	<extension point="org.eclipse.ui.trace.traceComponents">
		<component
			id="org.eclipse.mcp.traceComponent"
			label="Model Context Protocol Servers">
			<bundle
				name="org.eclipse.mcp">
			</bundle>
		</component>
	</extension>
	
	<extension point="org.eclipse.ui.console.consoleFactories">
       <consoleFactory 
          label="Agent Chat"
          class="org.eclipse.mcp.acp.view.AcpChatFactory"
          icon="icons/template_obj.png">
       </consoleFactory>
    </extension>
	
	<extension point="org.eclipse.ui.views">
      <view id="org.eclipse.mcp.acp.view.AcpView" name="ACP Chat" class="org.eclipse.mcp.acp.view.AcpView" icon="icons/templates.png" />
   </extension>
	
	 <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="toolbar:org.eclipse.mcp.acp.view.AcpView">
         <toolbar id="com.ibm.systemz.db2.toolbar.connection" label="%capability.category.name">
             <dynamic 
                  id="org.eclipse.mcp.acp.view.ToolbarButtonContributor"
                  class="org.eclipse.mcp.acp.view.ToolbarButtonContributor"/>
         </toolbar>
         <command commandId="org.eclipse.mcp.acp.cmd.model" tooltip="Select Model" style="pulldown"/>
         <command commandId="org.eclipse.mcp.acp.cmd.mode" tooltip="Select Mode"  style="pulldown"/>
      </menuContribution>
      <menuContribution locationURI="menu:org.eclipse.mcp.acp.cmd.model">
         <dynamic 
                  id="org.eclipse.mcp.acp.view.ToolbarButtonContributor"
                  class="org.eclipse.mcp.acp.view.ToolbarButtonContributor"/>
      </menuContribution>
   </extension>
   

   <extension point="org.eclipse.ui.commands">
      <category description="ACP" id="org.eclipse.mcp.acp.cmd.category" name="ACP" />
      <command name="Model" description="Select Model" categoryId="org.eclipse.mcp.acp.cmd.category" defaultHandler="org.eclipse.mcp.acp.view.CommandHandler" id="org.eclipse.mcp.acp.cmd.model" />
      <command name="Mode" description="Select Mode" categoryId="org.eclipse.mcp.acp.cmd.category" defaultHandler="org.eclipse.mcp.acp.view.CommandHandler" id="org.eclipse.mcp.acp.cmd.mode" />
   </extension>

   <!--extension point="org.eclipse.ui.commandImages">
      <image commandId="org.eclipse.mcp.acp.cmd.model" icon="icons/new_template.png"/>
      <image commandId="org.eclipse.mcp.acp.cmd.mode" icon="icons/template_obj.png" />
   </extension-->

   <extension point="org.eclipse.ui.bindings">
      <key sequence="M1+M3+M 1" commandId="org.eclipse.mcp.acp.cmd.model" schemeId="org.eclipse.ui.defaultAcceleratorConfiguration" contextId="org.eclipse.mcp.acp.AcpView"/>
      <key sequence="M1+M3+M 2" commandId="org.eclipse.mcp.acp.cmd.mode" schemeId="org.eclipse.ui.defaultAcceleratorConfiguration" contextId="org.eclipse.mcp.acp.AcpView"/>
   </extension>
</plugin>
